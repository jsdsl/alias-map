"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class AliasMap{constructor(){this.aliasResolutionMap=new Map,this.internalMap=new Map,this.internalKeyCounter=0}get(e){let t=this.internalMap.get(this.aliasResolutionMap.get(e));return void 0===t?void 0:t.value}set(e,t,s=!1){if(this.has(e)){if(!s)return this.get(e)===t;this.removeAlias(e)}let i=this.internalKeyCounter++;return this.aliasResolutionMap.set(e,i),this.internalMap.set(i,{value:t,aliases:[e]}),!0}addAliases(e,t,s=!1){if(this.has(e)){if(this.has(t))return this.get(t)===this.get(e);{let s=this.aliasResolutionMap.get(e);return this.aliasResolutionMap.set(t,s),this.internalMap.get(s).aliases.push(t),!0}}return!1}has(e){return this.aliasResolutionMap.has(e)}modify(e,t){if(this.has(e)){let s=this.aliasResolutionMap.get(e),i=this.internalMap.get(s),a=i.value;return i.value=t,a}}removeAlias(e){if(this.has(e)){let t=this.aliasResolutionMap.get(e);this.aliasResolutionMap.delete(e);let s=this.internalMap.get(t),i=s.aliases;return(i.length<0||0===i.length&&i[0]===e)&&this.internalMap.delete(t),s.value}}removeValue(e){if(this.has(e)){let t=this.aliasResolutionMap.get(e),s=this.internalMap.get(t),i=s.aliases;for(let e of i)this.aliasResolutionMap.delete(e);return this.internalMap.delete(t),s.value}}listAliases(e,t=!0){if(this.has(e)){let s=this.aliasResolutionMap.get(e),i=this.internalMap.get(s).aliases;if(!t)for(let t=0;t<i.length;t++)i[t]===e&&i.splice(t--,1);return i}}numberOfAliasesFor(e,t=!0){if(this.has(e)){let s=this.listAliases(e).length;return t||s--,s}return 0}size(){return this.internalMap.size}clear(){this.aliasResolutionMap.clear(),this.internalMap.clear(),this.internalKeyCounter=0}}exports.AliasMap=AliasMap;
//# sourceMappingURL=alias-map.js.map
